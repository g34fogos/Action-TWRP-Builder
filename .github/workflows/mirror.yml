name: Mirror Helper

on:
  workflow_dispatch:
    inputs:
        download_url:
          description: 'Input URL'
          required: true

jobs:
  Prepare-Env:
    runs-on: ubuntu-latest
    steps:

      - name: Install packages,setup & download
        run: |
          sudo apt update
          sudo apt install aria2 -y
          aria2c --user-agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36" "${{ inputs.download_url }}"
          ls
          pwd
          echo 'Done'
      - name: Create Release
        id: create_release
        uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          tag_name: ${{ github.ref }}
          release_name: Release ${{ github.ref }}
          draft: false
          prerelease: false
          
      - name: Upload Release Asset
        id: upload-release-asset
        uses: sekwah41/upload-release-assets@v1.1.0
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          asset_path: ./*
          upload_url: ${{ steps.create_release.outputs.upload_url }}
         
